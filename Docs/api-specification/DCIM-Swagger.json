{
    "openapi": "3.0.1",
    "info": {
      "title": "DCM",
      "version": "v1"
    },
    "servers": [
      {
        "url": "https://azwbddcm01.azurewebsites.net",
        "description": "Generated server url"
      }
    ],
    "paths": {
      "/api/v1/surface-capacity/update/{id}": {
        "put": {
          "tags": [
            "surface-capacity-controller"
          ],
          "summary": "Save comment & reference on surface capacity",
          "operationId": "saveCommentAndRef",
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "integer",
                "format": "int32"
              }
            },
            {
              "name": "updateFile",
              "in": "query",
              "required": true,
              "schema": {
                "type": "boolean"
              }
            }
          ],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "required": [
                    "comment"
                  ],
                  "type": "object",
                  "properties": {
                    "comment": {
                      "type": "string"
                    },
                    "file": {
                      "type": "string",
                      "format": "binary"
                    }
                  }
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "The comment & ref are well saved on the surface capacity",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "object"
                  }
                }
              }
            },
            "404": {
              "description": "Surface capacity not found",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "object"
                  }
                }
              }
            },
            "500": {
              "description": "Internal error while uploading reference file",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "object"
                  }
                }
              }
            }
          },
          "security": [
            {
              "Ouath2": []
            }
          ]
        }
      },
      "/api/v1/reservoir/validate": {
        "put": {
          "tags": [
            "reservoir-controller"
          ],
          "summary": "Validate List of reservoir profiles",
          "operationId": "validateReservoirs",
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "integer",
                    "format": "int32"
                  }
                }
              }
            },
            "required": true
          },
          "responses": {
            "200": {
              "description": "OK",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "object"
                  }
                }
              }
            }
          },
          "security": [
            {
              "Ouath2": []
            }
          ]
        }
      },
      "/api/v1/reservoir/unassign/{id}": {
        "put": {
          "tags": [
            "reservoir-controller"
          ],
          "summary": "Unassign reservoir profile from forecast scenario",
          "operationId": "unassignReservoirProfile",
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "integer",
                "format": "int32"
              }
            }
          ],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "string"
                }
              }
            },
            "required": true
          },
          "responses": {
            "200": {
              "description": "The reservoir profile is well unassigned from the forecast scenario",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "object"
                  }
                }
              }
            },
            "404": {
              "description": "Forecast scenario or reservoir profile not found",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "object"
                  }
                }
              }
            }
          },
          "security": [
            {
              "Ouath2": []
            }
          ]
        }
      },
      "/api/v1/reservoir/assign-to-scenario/{scenarioName}": {
        "put": {
          "tags": [
            "reservoir-controller"
          ],
          "summary": "Assign profile reservoir to a forecast scenario",
          "operationId": "assignToForecastScenario",
          "parameters": [
            {
              "name": "scenarioName",
              "in": "path",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/ReservoirDTO"
                  }
                }
              }
            },
            "required": true
          },
          "responses": {
            "200": {
              "description": "The profiles reservoir are well assigned to the forecast scenario",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "object"
                  }
                }
              }
            },
            "404": {
              "description": "Forecast scenario not found",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "object"
                  }
                }
              }
            }
          },
          "security": [
            {
              "Ouath2": []
            }
          ]
        }
      },
      "/api/v1/reservoir/add-assumption/{id}": {
        "put": {
          "tags": [
            "reservoir-controller"
          ],
          "summary": "Add assumption to a reservoir profile",
          "operationId": "addAssumption",
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "integer",
                "format": "int32"
              }
            },
            {
              "name": "updateFile",
              "in": "query",
              "required": true,
              "schema": {
                "type": "boolean"
              }
            }
          ],
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "required": [
                    "description"
                  ],
                  "type": "object",
                  "properties": {
                    "description": {
                      "type": "string"
                    },
                    "file": {
                      "type": "string",
                      "format": "binary"
                    }
                  }
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "The assumption is well added to the profile reservoir",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "object"
                  }
                }
              }
            },
            "404": {
              "description": "Profile reservoir not found",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "object"
                  }
                }
              }
            },
            "500": {
              "description": "Internal error while uploading assumption file",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "object"
                  }
                }
              }
            }
          },
          "security": [
            {
              "Ouath2": []
            }
          ]
        }
      },
      "/api/v1/scenario/create": {
        "post": {
          "tags": [
            "scenario-controller"
          ],
          "summary": "Create new forecast scenario",
          "operationId": "save",
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ScenarioDTO"
                }
              }
            },
            "required": true
          },
          "responses": {
            "200": {
              "description": "The forecast scenario is well created",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "object"
                  }
                }
              }
            },
            "400": {
              "description": "Bad request",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "object"
                  }
                }
              }
            }
          },
          "security": [
            {
              "Ouath2": []
            }
          ]
        }
      },
      "/api/v1/reservoir/upload": {
        "post": {
          "tags": [
            "reservoir-controller"
          ],
          "summary": "Upload reservoir file",
          "operationId": "uploadReservoirFile",
          "requestBody": {
            "content": {
              "application/json": {
                "schema": {
                  "required": [
                    "file"
                  ],
                  "type": "object",
                  "properties": {
                    "file": {
                      "type": "string",
                      "format": "binary"
                    }
                  }
                }
              }
            }
          },
          "responses": {
            "200": {
              "description": "The reservoir file is well uploaded",
              "content": {
                "*/*": {
                  "schema": {
                    "$ref": "#/components/schemas/FileValidationResultDTO"
                  }
                }
              }
            },
            "500": {
              "description": "Internal error while uploading reservoir file",
              "content": {
                "*/*": {
                  "schema": {
                    "$ref": "#/components/schemas/FileValidationResultDTO"
                  }
                }
              }
            }
          },
          "security": [
            {
              "Ouath2": []
            }
          ]
        }
      },
      "/api/v1/surface-capacity/{id}": {
        "get": {
          "tags": [
            "surface-capacity-controller"
          ],
          "summary": "Find Surface capacities scenario by Asset and version",
          "operationId": "findSurfaceCapacitiesByAsset",
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "integer",
                "format": "int32"
              }
            },
            {
              "name": "version",
              "in": "query",
              "required": true,
              "schema": {
                "type": "integer",
                "format": "int32"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "The surface capacities is well found",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "object"
                  }
                }
              }
            },
            "404": {
              "description": "Surface capacities not found",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "object"
                  }
                }
              }
            }
          },
          "security": [
            {
              "Ouath2": []
            }
          ]
        },
        "delete": {
          "tags": [
            "surface-capacity-controller"
          ],
          "summary": "Delete Surface capacity",
          "operationId": "deleteSurfaceCapacity",
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "integer",
                "format": "int32"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "OK",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "object"
                  }
                }
              }
            }
          },
          "security": [
            {
              "Ouath2": []
            }
          ]
        }
      },
      "/api/v1/scenario/{id}": {
        "get": {
          "tags": [
            "scenario-controller"
          ],
          "summary": "Find forecast scenario by ID",
          "operationId": "findScenarioDetailsById",
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "integer",
                "format": "int32"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "The forecast scenario is well found",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "object"
                  }
                }
              }
            },
            "404": {
              "description": "Forecast scenario not found",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "object"
                  }
                }
              }
            }
          },
          "security": [
            {
              "Ouath2": []
            }
          ]
        }
      },
      "/api/v1/scenario/all": {
        "get": {
          "tags": [
            "scenario-controller"
          ],
          "summary": "List of forecast scenario",
          "operationId": "findAll",
          "responses": {
            "200": {
              "description": "OK",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/ScenarioDTO"
                    }
                  }
                }
              }
            }
          },
          "security": [
            {
              "Ouath2": []
            }
          ]
        }
      },
      "/api/v1/reservoir/search": {
        "get": {
          "tags": [
            "reservoir-controller"
          ],
          "summary": "List of reservoir profiles by period",
          "operationId": "findByPeriod",
          "parameters": [
            {
              "name": "startDate",
              "in": "query",
              "required": false,
              "schema": {
                "type": "string",
                "format": "date"
              }
            },
            {
              "name": "endDate",
              "in": "query",
              "required": false,
              "schema": {
                "type": "string",
                "format": "date"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "Get the list of reservoir by period if startDate and endDate are defined",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/ReservoirDTO"
                    }
                  }
                }
              }
            }
          },
          "security": [
            {
              "Ouath2": []
            }
          ]
        }
      },
      "/api/v1/reservoir/reservoir-data/{id}": {
        "get": {
          "tags": [
            "reservoir-controller"
          ],
          "summary": "List of reservoir profile data by reservoir id",
          "operationId": "findReservoirProfileData",
          "parameters": [
            {
              "name": "id",
              "in": "path",
              "required": true,
              "schema": {
                "type": "integer",
                "format": "int32"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "List of reservoir profile data by reservoir id is well found",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "object"
                  }
                }
              }
            },
            "404": {
              "description": "Profile reservoir not found",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "object"
                  }
                }
              }
            }
          },
          "security": [
            {
              "Ouath2": []
            }
          ]
        }
      },
      "/api/v1/facility/search": {
        "get": {
          "tags": [
            "facility-controller"
          ],
          "summary": "List of Facilities by Asset",
          "operationId": "findByAssetId",
          "parameters": [
            {
              "name": "assetId",
              "in": "query",
              "required": true,
              "schema": {
                "type": "integer",
                "format": "int32"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "OK",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/FacilityDTO"
                    }
                  }
                }
              }
            }
          },
          "security": [
            {
              "Ouath2": []
            }
          ]
        }
      },
      "/api/v1/datalake/download": {
        "get": {
          "tags": [
            "datalake-storage-controller"
          ],
          "summary": "Download file by name from datalake",
          "operationId": "downloadFileByName",
          "parameters": [
            {
              "name": "filename",
              "in": "query",
              "required": true,
              "schema": {
                "type": "string"
              }
            }
          ],
          "responses": {
            "200": {
              "description": "The file is well downloaded",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            },
            "404": {
              "description": "The file is not found",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            },
            "500": {
              "description": "Internal error while downloading file",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          },
          "security": [
            {
              "Ouath2": []
            }
          ]
        }
      },
      "/api/v1/asset/all": {
        "get": {
          "tags": [
            "asset-controller"
          ],
          "summary": "List of asset",
          "operationId": "findAll_1",
          "responses": {
            "200": {
              "description": "OK",
              "content": {
                "*/*": {
                  "schema": {
                    "type": "array",
                    "items": {
                      "$ref": "#/components/schemas/AssetDTO"
                    }
                  }
                }
              }
            }
          },
          "security": [
            {
              "Ouath2": []
            }
          ]
        }
      }
    },
    "components": {
      "schemas": {
        "ReservoirDTO": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer",
              "format": "int32"
            },
            "fileName": {
              "type": "string"
            },
            "assetName": {
              "type": "string"
            },
            "importDate": {
              "type": "string",
              "format": "date-time"
            },
            "status": {
              "type": "string"
            },
            "hypComment": {
              "type": "string"
            },
            "hypFileName": {
              "type": "string"
            },
            "updateDate": {
              "type": "string",
              "format": "date-time"
            },
            "startDate": {
              "type": "string",
              "format": "date"
            },
            "endDate": {
              "type": "string",
              "format": "date"
            },
            "scenarios": {
              "type": "array",
              "items": {
                "$ref": "#/components/schemas/ScenarioDTO"
              }
            }
          }
        },
        "ScenarioDTO": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer",
              "format": "int32"
            },
            "startDate": {
              "type": "string",
              "format": "date"
            },
            "endDate": {
              "type": "string",
              "format": "date"
            },
            "name": {
              "type": "string"
            },
            "status": {
              "type": "string",
              "enum": [
                "DRAFT",
                "VALIDATED"
              ]
            },
            "saveDate": {
              "type": "string",
              "format": "date-time"
            }
          }
        },
        "FileValidationResultDTO": {
          "type": "object",
          "properties": {
            "valid": {
              "type": "boolean"
            }
          }
        },
        "EquipmentDTO": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer",
              "format": "int32"
            },
            "name": {
              "type": "string"
            },
            "code": {
              "type": "string"
            }
          }
        },
        "FacilityDTO": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer",
              "format": "int32"
            },
            "name": {
              "type": "string"
            },
            "type": {
              "type": "string"
            },
            "equipments": {
              "uniqueItems": true,
              "type": "array",
              "items": {
                "$ref": "#/components/schemas/EquipmentDTO"
              }
            }
          }
        },
        "AssetDTO": {
          "type": "object",
          "properties": {
            "id": {
              "type": "integer",
              "format": "int32"
            },
            "name": {
              "type": "string"
            },
            "subArea": {
              "type": "string"
            }
          }
        }
      },
      "securitySchemes": {
        "Ouath2": {
          "type": "oauth2",
          "flows": {
            "authorizationCode": {
              "tokenUrl": "https://login.microsoftonline.com/329e91b0-e21f-48fb-a071-456717ecc28e/oauth2/v2.0/token",
              "scopes": {
                "api://08a45056-f560-49c8-8994-954c7c142d81/all": "scope for all api"
              },
              "authorizationUrl": "https://login.microsoftonline.com/329e91b0-e21f-48fb-a071-456717ecc28e/oauth2/v2.0/authorize"
            }
          }
        }
      }
    },
    "security": []
  }